<tr>
  <%= form_for(projekt,
        url: admin_projekt_path(projekt),
        as: :projekt,
        html: { id: "edit_projekt_#{projekt.id}" }) do |f| %>

    <td class='small-3 projekt-text-field'>
      <%= f.text_field :name, 
                       id: "projekt_name_#{projekt.id}", 
                       label: t('custom.admin.projekts.index.name_singular') %>
      <div class='projekt-link'>               
        <%= link_to t("custom.admin.projekts.index.edit_page"), edit_admin_site_customization_page_path(projekt.page) %>
        <% page_status = projekt.page.status %>
        <%= "(#{page_status})" %>
        <%= link_to t("custom.admin.projekts.index.page_link"), projekt.page.url if page_status == 'published' %>
      </div>
    </td>

    <td class='small-3 projekt-text-field '>
      <% projekts = Projekt.all.to_a %>
      <% projekts.delete(projekt) %>
      <%= f.select :parent_id, projekts.pluck(:name, :id), 
                   { include_blank: true, label: t('custom.admin.projekts.index.parent') }, 
                   { id: "projekt_parent_#{projekt.id}"} %>
    </td>


    <td class='small-3' id="projekt_<%= projekt.id %>">
      <%= f.submit(t("admin.actions.update"), class: "button success") %>
      <%= link_to t("custom.admin.projekts.destroy"), admin_projekt_path(projekt), method: :delete, class: "button hollow alert" %>
    </td>
  <% end %>
</tr>

<% if projekt.children.any? %>
  <% projekt.children.each do |child_projekt| %>
    <%= render partial: "projekt", locals: { projekt: child_projekt } %> 
  <% end %>
<% end %>
